#!/bin/bash
# st-epic-child - Add epic→child dependency (correct direction)
#
# Usage: st-epic-child <epic-id> <child-id>
#
# This ensures the dependency direction is always correct:
# - Epic depends on child (epic blocked until child completes)
# - NOT child depends on epic (which would block the child)
#
# Example:
#   st-epic-child squad-039k squad-abc
#   # Result: squad-039k depends on squad-abc

set -euo pipefail

if [[ $# -lt 2 ]]; then
    echo "Usage: st-epic-child <epic-id> <child-id>"
    echo ""
    echo "Adds epic→child dependency (correct direction)"
    echo "Epic will be blocked until child completes"
    exit 1
fi

EPIC_ID="$1"
CHILD_ID="$2"

# Add dependency: epic depends on child
st dep add "$EPIC_ID" "$CHILD_ID"

echo "✓ $EPIC_ID depends on $CHILD_ID (epic blocked until child completes)"
